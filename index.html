<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>深圳万色智匠智能科技官网</title>
  <style>
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    
    body, html { 
      height: 100%; 
      scroll-behavior: smooth; 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
    }

    section {
      height: 100vh;
      width: 100vw;
      position: relative;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    
    .bg-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: contain; /* 改为contain以显示完整图片 */
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: scroll;
      background-color: #f5f5f5; /* 添加背景色填充空白区域 */
      /* iOS Safari 专用修复 */
      -webkit-background-size: contain;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }*/
      -webkit-background-size: cover;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }

    /* 导航点 */
    .nav-dots {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 1000;
    }
    
    .nav-dots a {
      width: 12px;
      height: 12px;
      background: rgba(170, 170, 170, 0.8);
      border-radius: 50%;
      display: block;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .nav-dots a.active,
    .nav-dots a:hover {
      background: rgba(51, 51, 51, 0.9);
      transform: scale(1.2);
    }

    footer {
      background: #f2f2f2;
      padding: 15px 0;
      font-size: 14px;
      color: #666;
      text-align: center;
    }
    
    footer a {
      color: #666;
      text-decoration: none;
      margin-left: 10px;
    }
    
    footer a:hover {
      color: #333;
    }

    /* 响应式断点 - 移动端图片自适应优化 */
    
    /* iOS Safari 专用修复 */
    @supports (-webkit-touch-callout: none) {
      section {
        height: 100vh;
        height: -webkit-fill-available; /* iOS Safari viewport fix */
      }
      
      .bg-image {
        background-attachment: scroll !important;
        background-size: contain !important; /* 移动端显示完整图片 */
        background-position: center center !important;
        background-color: #f5f5f5 !important;
        -webkit-background-size: contain !important;
        will-change: transform;
        transform: translate3d(0, 0, 0);
        -webkit-transform: translate3d(0, 0, 0);
      }
    }
    
    /* 移动端适配 */
    @media (max-width: 768px) {
      .nav-dots {
        right: 15px;
        gap: 10px;
      }
      
      .nav-dots a {
        width: 10px;
        height: 10px;
      }
      
      section {
        height: 100vh;
        height: -webkit-fill-available;
        min-height: 100vh;
      }
      
      .bg-image {
        /* 移动端优先显示完整图片 */
        background-size: contain !important;
        background-position: center center !important;
        background-attachment: scroll !important;
        background-repeat: no-repeat !important;
        background-color: #f5f5f5 !important; /* 背景色 */
        /* iOS专用 */
        -webkit-background-size: contain !important;
        /* 强制硬件加速 */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        will-change: transform;
      }
      
      footer {
        font-size: 13px;
        padding: 15px 10px;
      }
      
      footer div {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
    }
    
    /* 如果希望某些情况下仍使用cover模式，可以添加这个类 */
    .bg-image.cover-mode {
      background-size: cover !important;
      -webkit-background-size: cover !important;
    }
    
    /* 横屏时可能需要cover模式以避免留白过多 */
    @media (orientation: landscape) and (max-width: 768px) {
      .bg-image {
        background-size: cover !important;
        -webkit-background-size: cover !important;
      }
    }
    
    /* iPhone 专用适配 */
    @media (max-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {
      .nav-dots {
        right: 10px;
        gap: 8px;
      }
      
      .nav-dots a {
        width: 8px;
        height: 8px;
      }
      
      section {
        height: 100vh !important;
        height: -webkit-fill-available !important;
        min-height: 100vh !important;
        width: 100vw !important;
      }
      
      .bg-image {
        /* iPhone 专用背景设置 - 显示完整图片 */
        background-size: contain !important;
        background-position: center center !important;
        background-attachment: scroll !important;
        background-color: #f5f5f5 !important;
        -webkit-background-size: contain !important;
        /* 强制GPU渲染 */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        will-change: transform;
      }
      
      footer {
        font-size: 12px;
        padding: 12px 8px;
      }
    }
    
    /* 超小屏适配 */
    @media (max-width: 320px) {
      .nav-dots a {
        width: 6px;
        height: 6px;
      }
      
      footer {
        font-size: 11px;
        padding: 10px 5px;
      }
    }

    /* 高分辨率屏幕优化 */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      section {
        background-size: cover;
        background-position: center center;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
      }
    }
  </style>
</head>
<body>

  <!-- 使用img标签确保移动端图片正确显示 -->
  <section id="img1">
    <div class="bg-image" style="background-image: url('/images/WechatIMG1231.jpg');"></div>
  </section>
  <section id="img2">
    <div class="bg-image" style="background-image: url('/images/WechatIMG1232.jpg');"></div>
  </section>
  <section id="img3">
    <div class="bg-image" style="background-image: url('/images/WechatIMG1234.jpg');"></div>
  </section>
  <section id="img4">
    <div class="bg-image" style="background-image: url('/images/WechatIMG1235.jpg');"></div>
  </section>

  <!-- 桌面端和移动端通用导航点 -->
  <div class="nav-dots">
    <a href="#img1"></a>
    <a href="#img2"></a>
    <a href="#img3"></a>
    <a href="#img4"></a>
  </div>

  <footer>
    <div>
      <span>Copyright © 2024-2025 深圳万色智匠智能科技有限公司</span>
      <a href="https://beian.miit.gov.cn" target="_blank">粤ICP备2025436760号</a>
    </div>
  </footer>

  <script>
    // 监听滚动，高亮当前导航点
    const sections = document.querySelectorAll('section');
    const navDots = document.querySelectorAll('.nav-dots a');
    
    function updateActiveNav() {
      let current = '';
      const scrollPosition = window.pageYOffset;
      
      sections.forEach(sec => {
        const top = sec.offsetTop;
        const height = sec.offsetHeight;
        
        if (scrollPosition >= top - window.innerHeight / 2 && 
            scrollPosition < top + height - window.innerHeight / 2) {
          current = sec.getAttribute('id');
        }
      });
      
      // 更新导航点
      navDots.forEach(dot => {
        dot.classList.remove('active');
        if (dot.getAttribute('href') === '#' + current) {
          dot.classList.add('active');
        }
      });
    }
    
    // 监听滚动事件
    window.addEventListener('scroll', updateActiveNav);
    
    // 页面加载时初始化
    window.addEventListener('load', updateActiveNav);
    
    // 优化移动端滚动性能
    let ticking = false;
    
    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateActiveNav);
        ticking = true;
        setTimeout(() => { ticking = false; }, 16);
      }
    }
    
    window.addEventListener('scroll', requestTick);
    
    // 移动端背景图片自适应处理 - 针对iOS优化
    function adjustBackgroundImages() {
      const isMobile = window.innerWidth <= 768;
      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      const bgImages = document.querySelectorAll('.bg-image');
      
      bgImages.forEach(bgImage => {
        if (isMobile || isIOS) {
          // 获取当前背景图片URL
          const currentBg = bgImage.style.backgroundImage;
          
          // iOS和移动端强制重新设置所有背景属性
          bgImage.style.backgroundSize = 'contain'; // 改为contain
          bgImage.style.backgroundPosition = 'center center';
          bgImage.style.backgroundRepeat = 'no-repeat';
          bgImage.style.backgroundAttachment = 'scroll';
          bgImage.style.backgroundColor = '#f5f5f5'; // 添加背景色
          
          // iOS Safari专用属性
          if (isIOS) {
            bgImage.style.webkitBackgroundSize = 'contain'; // 改为contain
            bgImage.style.webkitTransform = 'translate3d(0, 0, 0)';
            bgImage.style.transform = 'translate3d(0, 0, 0)';
            bgImage.style.webkitBackfaceVisibility = 'hidden';
            bgImage.style.backfaceVisibility = 'hidden';
            bgImage.style.willChange = 'transform';
            
            // 强制重绘
            bgImage.offsetHeight;
            
            // 延迟重新设置背景图片
            setTimeout(() => {
              if (currentBg) {
                bgImage.style.backgroundImage = 'none';
                bgImage.offsetHeight; // 强制重排
                bgImage.style.backgroundImage = currentBg;
              }
            }, 50);
          } else {
            // 其他移动设备
            bgImage.style.transform = 'translateZ(0)';
          }
        }
      });
    }
    
    // iOS设备特殊处理
    function iosViewportFix() {
      if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
        const sections = document.querySelectorAll('section');
        sections.forEach(section => {
          section.style.height = '100vh';
          section.style.height = '-webkit-fill-available';
        });
      }
    }
    
    // 页面加载和窗口大小改变时调整
    window.addEventListener('load', () => {
      adjustBackgroundImages();
      iosViewportFix();
    });
    
    window.addEventListener('resize', () => {
      setTimeout(() => {
        adjustBackgroundImages();
        iosViewportFix();
      }, 100);
    });
    
    // iOS设备旋转特殊处理
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        adjustBackgroundImages();
        iosViewportFix();
      }, 200);
    });
    
    // iOS页面进入前台时重新调整
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
        setTimeout(adjustBackgroundImages, 50);
      }
    });
    
    // 平滑滚动到目标位置（兼容旧浏览器）
    function smoothScrollTo(element) {
      const targetPosition = element.offsetTop;
      const startPosition = window.pageYOffset;
      const distance = targetPosition - startPosition;
      const duration = 800;
      let start = null;
      
      function animation(currentTime) {
        if (start === null) start = currentTime;
        const timeElapsed = currentTime - start;
        const run = ease(timeElapsed, startPosition, distance, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) requestAnimationFrame(animation);
      }
      
      function ease(t, b, c, d) {
        t /= d / 2;
        if (t < 1) return c / 2 * t * t + b;
        t--;
        return -c / 2 * (t * (t - 2) - 1) + b;
      }
      
      requestAnimationFrame(animation);
    }
    
    // 为导航链接添加点击事件（如果浏览器不支持CSS scroll-behavior）
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          e.preventDefault();
          
          // 检查是否支持原生平滑滚动
          if ('scrollBehavior' in document.documentElement.style) {
            target.scrollIntoView({ behavior: 'smooth' });
          } else {
            smoothScrollTo(target);
          }
        }
      });
    });
  </script>

</body>
</html>
